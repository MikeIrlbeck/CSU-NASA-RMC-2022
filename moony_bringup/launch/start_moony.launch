<launch>
  <arg name="scan_topic"  value="moony/laser/scan" />

   <!-- Load the urdf into the parameter server. -->   
  <param name="robot_description" command="$(find xacro)/xacro '$(find moony_description)/robot/real_robot.urdf.xacro'" />
    
  <!-- TODO: load diff drive and other controllers -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" >
      <!-- <remap from="robot_description" to="robot_description" /> -->
      <!-- <remap from="joint_states" to="different_joint_states" /> -->
  </node>
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" args="_use_gui:=True" />
  
  <include file="$(find moony_bringup)/launch/start_lidar.launch" >
    <arg name="serial_port" value="/dev/ttyUSB1"/>
    <arg name="frame_id" value="lidar_link"/>
    <arg name="inverted" value="true"/>
    <arg name="scan_topic" value="$(arg scan_topic)"/>
  </include>

  <include file="$(find wit_node)/launch/wit.launch" >
      <arg name="port" value="/dev/ttyUSB2"/>
      <!-- imu frame: imu_link -->
  </include>


  <include file="$(find moony_odometry)/launch/moony_localization.launch">
    <arg name="sensors" value="ekf_real_robot.yaml" />
    <!-- odom frame: skid drive -->
  </include>



  <!-- TODO: add beacon -->
</launch>

<!-- bad imu package -->
  <!-- <include file="$(find wit-imu-driver)/launch/WT901C.launch" >
      <arg name="serial_port" value="ttyUSB2"/>
      <arg name="frame_id" value="imu_link"/>
      <arg name="imu_topic" value="moony/imu"/>
      <arg name="publish_mag" value="false"/>
  </include> -->
